"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[3404],{7618:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>t,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"module1-ros2/lesson3","title":"Lesson 3: ROS 2 Services and Actions","description":"In this lesson, we will explore two other important communication mechanisms in ROS 2: services and actions.","source":"@site/docs/module1-ros2/lesson3.md","sourceDirName":"module1-ros2","slug":"/module1-ros2/lesson3","permalink":"/hackathone-physical-AI-humonoid-robtics--Book/book/module1-ros2/lesson3","draft":false,"unlisted":false,"editUrl":"https://github.com/SaimaWaheed-Student/hackathone-physical-AI-humonoid-robtics--Book/tree/main/website/docs/module1-ros2/lesson3.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"bookSidebar","previous":{"title":"Lesson 2: ROS 2 Publisher and Subscriber","permalink":"/hackathone-physical-AI-humonoid-robtics--Book/book/module1-ros2/lesson2"},"next":{"title":"Module 2: The Digital Twin (Gazebo & Unity)","permalink":"/hackathone-physical-AI-humonoid-robtics--Book/book/module2"}}');var i=r(4848),o=r(8453);const t={sidebar_position:3},c="Lesson 3: ROS 2 Services and Actions",a={},l=[{value:"Services",id:"services",level:2},{value:"Service Server",id:"service-server",level:3},{value:"Service Client",id:"service-client",level:3},{value:"Actions",id:"actions",level:2},{value:"Conclusion of Module 1",id:"conclusion-of-module-1",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"lesson-3-ros-2-services-and-actions",children:"Lesson 3: ROS 2 Services and Actions"})}),"\n",(0,i.jsx)(n.p,{children:"In this lesson, we will explore two other important communication mechanisms in ROS 2: services and actions."}),"\n",(0,i.jsx)(n.h2,{id:"services",children:"Services"}),"\n",(0,i.jsx)(n.p,{children:"Services are a request-response communication mechanism. One node acts as a service server, providing a service, while another node acts as a service client, making a request and waiting for a response. This is useful for tasks that have a clear beginning and end, and where a synchronous communication pattern is appropriate."}),"\n",(0,i.jsx)(n.h3,{id:"service-server",children:"Service Server"}),"\n",(0,i.jsx)(n.p,{children:"Here is an example of a simple service server in Python that adds two integers:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import rclpy\r\nfrom rclpy.node import Node\r\nfrom example_interfaces.srv import AddTwoInts\r\n\r\nclass MyServiceServer(Node):\r\n    def __init__(self):\r\n        super().__init__('my_service_server')\r\n        self.srv = self.create_service(AddTwoInts, 'add_two_ints', self.add_two_ints_callback)\r\n\r\n    def add_two_ints_callback(self, request, response):\r\n        response.sum = request.a + request.b\r\n        self.get_logger().info('Incoming request\\na: %d b: %d' % (request.a, request.b))\r\n        return response\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    my_service_server = MyServiceServer()\r\n    rclpy.spin(my_service_server)\r\n    rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,i.jsx)(n.h3,{id:"service-client",children:"Service Client"}),"\n",(0,i.jsx)(n.p,{children:"Here is the corresponding service client:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import rclpy\r\nfrom rclpy.node import Node\r\nfrom example_interfaces.srv import AddTwoInts\r\n\r\nclass MyServiceClient(Node):\r\n    def __init__(self):\r\n        super().__init__('my_service_client')\r\n        self.cli = self.create_client(AddTwoInts, 'add_two_ints')\r\n        while not self.cli.wait_for_service(timeout_sec=1.0):\r\n            self.get_logger().info('service not available, waiting again...')\r\n        self.req = AddTwoInts.Request()\r\n\r\n    def send_request(self):\r\n        self.req.a = 41\r\n        self.req.b = 1\r\n        self.future = self.cli.call_async(self.req)\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    my_service_client = MyServiceClient()\r\n    my_service_client.send_request()\r\n\r\n    while rclpy.ok():\r\n        rclpy.spin_once(my_service_client)\r\n        if my_service_client.future.done():\r\n            try:\r\n                response = my_service_client.future.result()\r\n            except Exception as e:\r\n                my_service_client.get_logger().info(\r\n                    'Service call failed %r' % (e,))\r\n            else:\r\n                my_service_client.get_logger().info(\r\n                    'Result of add_two_ints: for %d + %d = %d' %\r\n                    (my_service_client.req.a, my_service_client.req.b, response.sum))\r\n            break\r\n\r\n    my_service_client.destroy_node()\r\n    rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,i.jsx)(n.h2,{id:"actions",children:"Actions"}),"\n",(0,i.jsx)(n.p,{children:"Actions are used for long-running tasks. They are similar to services, but they provide feedback on the progress of the task and can be preempted (cancelled). An action consists of three parts: a goal, feedback, and a result."}),"\n",(0,i.jsx)(n.p,{children:"An example of an action is a robot navigating to a specific location. The goal would be the target location. The feedback could be the robot's current position. The result would be whether the robot successfully reached the location."}),"\n",(0,i.jsx)(n.p,{children:"Due to their complexity, we will cover the implementation of actions in a future advanced course."}),"\n",(0,i.jsx)(n.h2,{id:"conclusion-of-module-1",children:"Conclusion of Module 1"}),"\n",(0,i.jsx)(n.p,{children:"Congratulations on completing Module 1! You have learned the basics of ROS 2, including nodes, topics, services, and actions. You are now ready to move on to the next module, where we will dive into robot simulation."})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>c});var s=r(6540);const i={},o=s.createContext(i);function t(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);